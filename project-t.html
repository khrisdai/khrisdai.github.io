<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Khristal Clear</title>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-CCE37Z32EH"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-CCE37Z32EH');
        </script>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <!-- Custom Google font-->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@100;200;300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <!-- Load d3.js -->
        <script src="https://d3js.org/d3.v4.js"></script>
        <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
        <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
    </head>
    <body class="d-flex flex-column h-100 bg-light">
        <main class="flex-shrink-0">
            <!-- Navigation-->
            <nav class="navbar navbar-expand-lg navbar-light bg-white py-3">
                <div class="container px-5">
                    <a class="navbar-brand" href="index.html"><span class="fw-bolder text-gradient">Khristal Clear</span></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 small fw-bolder">
                            <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Projects</a>
                                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                                    <li><a class="dropdown-item" href="project-t.html">Project Tetromino</a></li>
                                    <li><a class="dropdown-item" href="#">Project S@ndwich</a></li>
                                    <!--<li><hr class="dropdown-divider" /></li>-->
                                </ul>
                            </li>
                            <!--<li class="nav-item"><a class="nav-link" href="#">About</a></li>-->
                            <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!-- Page Content-->
            <div class="container px-5 my-5">
                <div class="text-center mb-5">
                    <h1 class="display-5 fw-bolder mb-0"><span class="text-gradient d-inline">Project Tetromino</span></h1>
                </div>
                <div class="row gx-5 justify-content-center">
                    <div class="col-lg-11 col-xl-9 col-xxl-8">
                        <!-- Project Description-->
                        <section>
                            <div class="card shadow border-0 rounded-4 mb-5">
                                <div class="card-body p-5">
                                    <h3 class="fw-bolder mb-0"><span class="text-gradient d-inline">ACA Marketplace Complexities</span></h3>
                                    <div class="pb-3"></div>
                                    <p>In the United States, healthcare is often tied to employment, causing discontinuity when people change jobs or lose employment. While the Affordable Care Act (ACA) attempts to address this by offering a marketplace, it overwhelms many consumers with numerous insurance plans, each with different networks, costs, and coverages. Let&apos;s dive in.</p>
                                    <div class="pb-3"></div>
                                    <h5 class="fw-bolder mb-0"><span class="text-gradient d-inline">Key Factors in Plan Selection</span></h5>
                                    <div class="pb-3"></div>
                                    <!--optimization framework BEG-->
                                    <div class="row align-items-center gx-5">
                                        <div class="col text-center text-lg-start mb-4 mb-lg-0">
                                            <div class="bg-light p-4 rounded-4">
                                                <div class="text-primary fw-bolder mb-2">Brand&nbsp;&nbsp;<i class="bi bi-info-circle" data-bs-toggle="tooltip" data-bs-placement="right" title="Insurance companies are required to report on consumer rating. Check the quality rating for performance on timely reimbursement, provider support and customer service."></i></div>
                                                <div class="small fw-normal">Quality Rating</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="pb-3"></div>
                                    <div class="row align-items-center gx-5">
                                        <div class="col text-center text-lg-start mb-4 mb-lg-0">
                                            <div class="bg-light p-4 rounded-4">
                                                <div class="text-primary fw-bolder mb-2">Access to Care&nbsp;&nbsp;<i class="bi bi-info-circle" data-bs-toggle="tooltip" data-bs-placement="right" title="Determine how restrictive the plan is by inspecting how many doctors and hospitals are included as in-network, whether referral or prior authorization is required to see a specialist."></i></div>
                                                <div class="small fw-normal">Network Size</div>
                                                <div class="small fw-normal">Referral Requirement</div>
                                                <div class="small fw-normal">Prior Authorization Requirement</div>
                                            </div>
                                        </div>
                                        <div class="col text-center text-lg-start mb-4 mb-lg-0">
                                            <div class="bg-light p-4 rounded-4">
                                                <div class="text-primary fw-bolder mb-2">Cost Sharing&nbsp;&nbsp;<i class="bi bi-info-circle" data-bs-toggle="tooltip" data-bs-placement="right" title="Determine how much you want the plan to pay vs how much you want to pay out-of-pocket. Generally speaking, the more the plan pays, the higher the monhtly premium."></i></div>
                                                <div class="small fw-normal">Metal Level (Bronze, Silver, Gold, Platinum)</div>
                                                <div class="small fw-normal">Plan Design (deductible, copay etc.)</div>
                                                <div class="small fw-normal">Drug Formulary</div>
                                            </div>
                                        </div>
                                    </div> 
                                    <div class="pb-3"></div>
                                    <div class="row align-items-center gx-5">
                                        <div class="col text-center text-lg-start mb-4 mb-lg-0">
                                            <div class="bg-light p-4 rounded-4">
                                                <div class="text-secondary fw-bolder mb-2">Lifestyle Risk&nbsp;&nbsp;<i class="bi bi-info-circle" data-bs-toggle="tooltip" data-bs-placement="right" title="Consider your own health and lifestyle risk."></i></div>
                                                <div class="small fw-normal">Health Status</div>
                                                <div class="small fw-normal">Social Determinants</div>
                                                <div class="small fw-normal">Hobbies</div>
                                            </div>
                                        </div>
                                        <div class="col text-center text-lg-start mb-4 mb-lg-0">
                                            <div class="bg-light p-4 rounded-4">
                                                <div class="text-secondary fw-bolder mb-2">Budget&nbsp;&nbsp;<i class="bi bi-info-circle" data-bs-toggle="tooltip" data-bs-placement="right" title="Check eligibility for government subsidy based on income. Consider how much you can afford monthly and how much emergency fund you have available to handle unexpected healthcare needs."></i></div>
                                                <div class="small fw-normal">Govt Subsidies</div>
                                                <div class="small fw-normal">Monthly Budget</div>
                                                <div class="small fw-normal">Emergency Fund</div>
                                            </div>
                                        </div>
                                        <div class="col text-center text-lg-start mb-4 mb-lg-0">
                                            <div class="bg-light p-4 rounded-4">
                                                <div class="text-secondary fw-bolder mb-2">Risk Tolerance&nbsp;&nbsp;<i class="bi bi-info-circle" data-bs-toggle="tooltip" data-bs-placement="right" title="Risk tolerance refers to your willingness and ability to handle potential healthcare expenses. It involves assessing how much financial risk you are comfortable with in exchange for lower premiums or vice versa. For instance, individuals with high risk tolerance may opt for plans with lower premiums but higher out-of-pocket costs, while those with low risk tolerance may prefer higher premiums for more comprehensive coverage and lower potential out-of-pocket expenses."></i></div>
                                                <div class="small fw-normal">Personal Belief</div>
                                                <div class="small fw-normal">Family Safety Net</div>
                                                <div class="small fw-normal">Financial Preparedness</div>
                                            </div>
                                        </div>
                                    </div> 
                                    <!--optimization framework END-->
                                    <div class="pb-3"></div>
                                    <h5 class="fw-bolder mb-0"><span class="text-gradient d-inline">Expected vs Unexpected</span></h5>
                                    <div class="pb-3"></div>
                                    <p>There are two goals to consider when choosing the best plan. 
                                        <div>
                                        <i class="bi bi-caret-right-fill"></i>
                                        To provide the best financial outcome based on current healthcare needs.<br>
                                        <i class="bi bi-caret-right-fill"></i>
                                        To protect you financially when unexpected healthcare needs arise.
                                        </div>
                                    </p>
                                    <div class="pb-3"></div>
                                    <h5 class="fw-bolder mb-0"><span class="text-gradient d-inline">A Word on Risk Tolerance</span></h5>
                                    <div class="pb-3"></div>
                                    <p>YOLO is not a viable strategy if you don't have a backup plan.</p>
                                </div>
                            </div>
                        </section>
                        <!-- Divider-->
                        <!-- <div class="pb-5"></div>-->
                        <!--D3 map-->
                        <div class="card shadow border-0 rounded-4 mb-5">
                            <div class="card-body p-5">
                                <div class="d-flex align-items-center mb-4">
                                    <!--<div class="feature bg-primary bg-gradient-primary-to-secondary text-white rounded-3 me-3">
                                        <i class="bi bi-hexagon"></i>
                                    </div>-->
                                    <h3 class="fw-bolder mb-0">
                                        <span class="text-gradient d-inline">Choosing a Plan</span></h3>
                                </div>
                                <p class="text-muted">Select a state to start</p>
                            </div>
                            <div id="chart-container" class="pb-3">
                                <section id="state_map">                    
                                    <!-- Create an element where the map will take place -->
                                    <svg id="ACA_dataviz" width="960" height="400" viewBox="0 0 960 400" preserveAspectRatio="xMinYMin"></svg>

                                    <script>
                                    // Function to make the chart responsive
                                    function makeResponsive() {
                                        // Get the width of the container
                                        var containerWidth = d3.select("#chart-container").node().getBoundingClientRect().width;
                                        var containerHeight = d3.select("#chart-container").node().getBoundingClientRect().height;
                                        // Update the width of the SVG
                                        svg.attr("width", containerWidth);
                                        svg.attr("height", containerHeight);
                                        
                                        // Define the minimum scale
                                        var minScale = 500; // Adjust this value as needed
                                        var newScale = Math.max(containerWidth / 1.3, minScale);
                                        // Update the projection
                                        projection.scale(newScale) // Adjust the scale based on the width
                                                .translate([1100+containerWidth *0.56, containerHeight/0.57]); // Adjust the translation based on the width
                                    }

                                    // The svg
                                    var svg = d3.select("svg"),
                                        width = +svg.attr("width"),
                                        height = +svg.attr("height");
                
                                    // Map and projection
                                    var projection = d3.geoMercator()
                                        .scale(600) // This is the zoom
                                        .translate([1480, 700]); // You have to play with these values to center your map
                                    
                                    // Call the makeResponsive function on page load and window resize
                                    makeResponsive();
                                    d3.select(window).on("resize", makeResponsive);

                                    // Path generator
                                    var path = d3.geoPath()
                                        .projection(projection)
                
                                    // Load external data and boot
                                    d3.json("DATA/us_states_hexgrid.geojson.json", function(data){
                
                                    // Set up color scale
                                    const defaultColor = "#1e30f3"; // Default color for hexbins without a specific "colorAttribute"
                                    const colorMap = {
                                    0: "#1e30f3", // Replace 0 with your actual "colorAttribute" values
                                    50: "#854ad7",
                                    100: "#FD69B6"
                                    // Add more color entries for other "colorAttribute" values
                                    };
                
                                    // Set up click count
                                    let clickCount = 0;
                
                                    // Add the labels
                                    svg.append("g")
                                        .selectAll("g")  // Select groups (each group will contain a path and a text element)
                                        .data(data.features)
                                        .enter().append("g")  // Append a group for each feature
                                        //.attr("class", "hexbin-group")  // Optional: Add a class for styling or selection later
                                        .on("mouseover", handleMouseOver)
                                        .on("mouseout", handleMouseOut)
                                        .on("click", function (d) {
                                            // Open the link on click
                                            const link = d.properties.link;
                                            if (link) {
                                                window.open(link, "_blank");
                                            }
                                        })
                                        .each(function (d) {
                                            // Append path (hexbin) to the group
                                            d3.select(this).append("path")
                                                .attr("d", path)
                                                .style("fill", d => colorMap[d.properties.colorAttribute] || defaultColor)
                                                .attr("stroke", "white");
                
                                            // Append text label to the group
                                            d3.select(this).append("text")
                                                .attr("x", path.centroid(d)[0])
                                                .attr("y", path.centroid(d)[1])
                                                .text(d => d.properties.iso3166_2)
                                                .attr("text-anchor", "middle")
                                                .attr("alignment-baseline", "central")
                                                .style("font-size", 14)
                                                .style("font-family", "figtree")
                                                .style("font-weight", "600")
                                                .style("fill", "white");
                                        });
                                    // // Define the hover over effect
                                    function handleMouseOver(d) {
                                        d3.select(this)
                                        .select("path")
                                        .transition()
                                        .duration(200)
                                        .style("opacity", d => colorMap[d.properties.colorAttribute] ? 0.8 : 0.7)
                                        const link = d.properties.link;
                                         if (link) {
                                             d3.select(this).style("cursor", "pointer");
                                         }
                                        // d3.select(this)
                                        // .select("text")
                                        // .transition()
                                        // .duration(200)
                                        // .style("fill", "black")
                
                                    }
                
                                    // Define the mouseout effect
                                    function handleMouseOut(d) {
                                        d3.select(this)
                                        .select("path")
                                        .transition()
                                        .duration(200)
                                        .style("opacity", d => colorMap[d.properties.colorAttribute] ? 1 : 1)
                                    }
                                    })
                                    </script>   
                                </section>
                            </div>
                                <!--<section class="pt3 pb3 align--center">
                                    <h3 class="mb2">Legend</h3>
                                    <img class="m1" src="" alt="" style="height:50px">
                                    <img class="m1" src="" alt="" style="height:45px">
                                    <img class="m1" src="" alt="" style="height:35px">
                                    <img class="m1" src="" alt="" style="height:50px">
                                    <img class="m1" src="" alt="" style="height:50px">
                                </section>-->
                            </div>
                        
                        <!-- Call to Action-->
                        <section>
                            <div class="card shadow border-0 rounded-4 mb-5">
                                <div class="card-body p-5">
                                    <div class="mb-5">
                                        <div class="d-flex align-items-center mb-4">
                                            <!--<div class="feature bg-primary bg-gradient-primary-to-secondary text-white rounded-3 me-3"><i class="bi bi-app-indicator"></i></div>-->
                                            <h3 class="fw-bolder mb-0"><span class="text-gradient d-inline">Enrolling in a Plan</span></h3>
                                        </div>
                                        <p class="text-muted">To enroll, visit healthcare.gov - the official government marketplace.</p> 
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </main>
        <!-- Footer-->
        <footer class="bg-white py-4 mt-auto">
            <div class="container px-5">
                <div class="row align-items-center justify-content-between flex-column flex-sm-row">
                    <div class="col-auto"><div class="small m-0">Copyright &copy; Khris Dai 2024</div></div>
                    <!--<div class="col-auto">
                        <a class="small" href="#!">Privacy</a>
                        <span class="mx-1">&middot;</span>
                        <a class="small" href="#!">Terms</a>
                        <span class="mx-1">&middot;</span>
                        <a class="small" href="#!">Contact</a>
                    </div>-->
                </div>
            </div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
